!function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?l(i[n]):i[n]]=!0;return r}function r(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),v.innerHTML=t;var r=5;do{if(0===r)throw h("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&g(v),t=v.innerHTML,v.innerHTML=t}while(t!==v.innerHTML);for(var i=v.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),p(i.attributes));break;case 3:n.chars(i.textContent)}var a;if(!(a=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),a=i.nextSibling,!a))for(;null==a&&(i=i.parentNode,i!==v);)a=i.nextSibling,1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=a}for(;i=v.firstChild;)v.removeChild(i)}function p(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function f(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(k,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=l(e),!n&&D[e]&&(n=e),n||$[e]!==!0||(r("<"),r(e),o(i,function(n,i){var a=l(i),o="img"===e&&"src"===a||"background"===a;M[a]!==!0||N[a]===!0&&!t(n,o)||(r(" "),r(i),r('="'),r(f(n)),r('"'))}),r(">"))},end:function(e){e=l(e),n||$[e]!==!0||x[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(f(e))}}}function g(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var a=n[r],o=a.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),r--,i--)}var s=t.firstChild;s&&g(s),t=t.nextSibling}}var b=!1;this.$get=["$$sanitizeUri",function(e){return b&&a($,T),function(t){var n=[];return u(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?(b=e,this):b},i=t.bind,a=t.extend,o=t.forEach,s=t.isDefined,l=t.lowercase,c=t.noop,u=r,d=m;var v,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=/([^#-~ |!])/g,x=n("area,br,col,hr,img,wbr"),w=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C=n("rp,rt"),E=a({},C,w),z=a({},w,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),L=a({},C,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),T=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),D=n("script,style"),$=a({},x,z,L,E),N=n("background,cite,href,longdesc,src,xlink:href"),S=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),F=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=a({},N,F,S);!function(e){var t;if(!e.document||!e.document.implementation)throw h("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)v=r[0];else{var i=t.createElement("html");v=t.createElement("body"),i.appendChild(v),t.appendChild(i)}}(e)}function r(e){var t=[],n=d(t,c);return n.chars(e),t.join("")}var i,a,o,s,l,c,u,d,h=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isDefined,s=t.isFunction,l=t.isObject,c=t.isString;return function(t,u,d){function h(e){e&&y.push(r(e))}function p(e,t){var n,r=b(e);y.push("<a ");for(n in r)y.push(n+'="'+r[n]+'" ');!o(u)||"target"in r||y.push('target="',u,'" '),y.push('href="',e.replace(/"/g,"&quot;"),'">'),h(t),y.push("</a>")}if(null==t||""===t)return t;if(!c(t))throw a("notstring","Expected string but received: {0}",t);for(var f,m,g,b=s(d)?d:l(d)?function(){return d}:function(){return{}},v=t,y=[];f=v.match(n);)m=f[0],f[2]||f[4]||(m=(f[3]?"http://":"mailto:")+m),g=f.index,h(v.substr(0,g)),p(m,f[0].replace(i,"")),v=v.substring(g+f[0].length);return h(v),e(y.join(""))}}])}(window,window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvcnMvYW5ndWxhci1zYW5pdGl6ZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhbmd1bGFyIiwiJFNhbml0aXplUHJvdmlkZXIiLCJ0b01hcCIsInN0ciIsImxvd2VyY2FzZUtleXMiLCJpIiwib2JqIiwiaXRlbXMiLCJzcGxpdCIsImxlbmd0aCIsImxvd2VyY2FzZSIsImh0bWxQYXJzZXJJbXBsIiwiaHRtbCIsImhhbmRsZXIiLCJ1bmRlZmluZWQiLCJpbmVydEJvZHlFbGVtZW50IiwiaW5uZXJIVE1MIiwibVhTU0F0dGVtcHRzIiwiJHNhbml0aXplTWluRXJyIiwiZG9jdW1lbnQiLCJkb2N1bWVudE1vZGUiLCJzdHJpcEN1c3RvbU5zQXR0cnMiLCJub2RlIiwiZmlyc3RDaGlsZCIsIm5vZGVUeXBlIiwic3RhcnQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiYXR0clRvTWFwIiwiYXR0cmlidXRlcyIsImNoYXJzIiwidGV4dENvbnRlbnQiLCJuZXh0Tm9kZSIsImVuZCIsIm5leHRTaWJsaW5nIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiYXR0cnMiLCJtYXAiLCJpaSIsImF0dHIiLCJuYW1lIiwidmFsdWUiLCJlbmNvZGVFbnRpdGllcyIsInJlcGxhY2UiLCJTVVJST0dBVEVfUEFJUl9SRUdFWFAiLCJoaSIsImNoYXJDb2RlQXQiLCJsb3ciLCJOT05fQUxQSEFOVU1FUklDX1JFR0VYUCIsImh0bWxTYW5pdGl6ZVdyaXRlckltcGwiLCJidWYiLCJ1cmlWYWxpZGF0b3IiLCJpZ25vcmVDdXJyZW50RWxlbWVudCIsIm91dCIsImJpbmQiLCJwdXNoIiwidGFnIiwiYmxvY2tlZEVsZW1lbnRzIiwidmFsaWRFbGVtZW50cyIsImZvckVhY2giLCJrZXkiLCJsa2V5IiwiaXNJbWFnZSIsInZhbGlkQXR0cnMiLCJ1cmlBdHRycyIsInZvaWRFbGVtZW50cyIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJsIiwiYXR0ck5vZGUiLCJhdHRyTmFtZSIsImxhc3RJbmRleE9mIiwicmVtb3ZlQXR0cmlidXRlTm9kZSIsInN2Z0VuYWJsZWQiLCJ0aGlzIiwiJGdldCIsIiQkc2FuaXRpemVVcmkiLCJleHRlbmQiLCJzdmdFbGVtZW50cyIsImh0bWxQYXJzZXIiLCJodG1sU2FuaXRpemVXcml0ZXIiLCJ1cmkiLCJ0ZXN0Iiwiam9pbiIsImVuYWJsZVN2ZyIsImlzRGVmaW5lZCIsIm5vb3AiLCJvcHRpb25hbEVuZFRhZ0Jsb2NrRWxlbWVudHMiLCJvcHRpb25hbEVuZFRhZ0lubGluZUVsZW1lbnRzIiwib3B0aW9uYWxFbmRUYWdFbGVtZW50cyIsImJsb2NrRWxlbWVudHMiLCJpbmxpbmVFbGVtZW50cyIsImh0bWxBdHRycyIsInN2Z0F0dHJzIiwiZG9jIiwiaW1wbGVtZW50YXRpb24iLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJkb2NFbGVtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiZ2V0RG9jdW1lbnRFbGVtZW50IiwiYm9keUVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJzYW5pdGl6ZVRleHQiLCJ3cml0ZXIiLCIkJG1pbkVyciIsIm1vZHVsZSIsInByb3ZpZGVyIiwiZmlsdGVyIiwiJHNhbml0aXplIiwiTElOS1lfVVJMX1JFR0VYUCIsIk1BSUxUT19SRUdFWFAiLCJsaW5reU1pbkVyciIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsImlzU3RyaW5nIiwidGV4dCIsInRhcmdldCIsImFkZFRleHQiLCJhZGRMaW5rIiwidXJsIiwibGlua0F0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzRm4iLCJtYXRjaCIsInJhdyIsImluZGV4Iiwic3Vic3RyIiwic3Vic3RyaW5nIl0sIm1hcHBpbmdzIjoiQ0FRQSxTQUFVQSxFQUFRQyxHQUFVLFlBc0p4QixTQUFTQyxLQXVKTCxRQUFTQyxHQUFNQyxFQUFLQyxHQUNoQixHQUFzQ0MsR0FBbENDLEtBQVVDLEVBQVFKLEVBQUlLLE1BQU0sSUFDaEMsS0FBS0gsRUFBSSxF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SXdILEVBQU1FLE1BQ1ZQLEVBQVFNLEVBQUlFLE9BQU8sRUFBRzNILElBQ3RCb0gsRUFBUUMsRUFBS0csRUFBTSxHQUFHakYsUUFBUXFFLEVBQWUsS0FDN0NhLEVBQU1BLEVBQUlHLFVBQVU1SCxFQUFJd0gsRUFBTSxHQUFHcEgsT0FHckMsT0FEQStHLEdBQVFNLEdBQ0RmLEVBQVVuRyxFQUFLd0UsS0FBSyxVQWdDcENyRixPQUFRQSxPQUFPQyIsImZpbGUiOiJ2ZW5kb3JzL2FuZ3VsYXItc2FuaXRpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgcnVzdGFtc2FpZG92IG9uIDAyLjAzLjE3LlxuICovXG4vKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS42LjJcbiAqIChjKSAyMDEwLTIwMTcgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhcikgeyd1c2Ugc3RyaWN0JztcblxuICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAgICAgKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gICAgICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICAgICAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAgICAgKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gICAgICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICAgICAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovXG5cbiAgICB2YXIgJHNhbml0aXplTWluRXJyID0gYW5ndWxhci4kJG1pbkVycignJHNhbml0aXplJyk7XG4gICAgdmFyIGJpbmQ7XG4gICAgdmFyIGV4dGVuZDtcbiAgICB2YXIgZm9yRWFjaDtcbiAgICB2YXIgaXNEZWZpbmVkO1xuICAgIHZhciBsb3dlcmNhc2U7XG4gICAgdmFyIG5vb3A7XG4gICAgdmFyIGh0bWxQYXJzZXI7XG4gICAgdmFyIGh0bWxTYW5pdGl6ZVdyaXRlcjtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtb2R1bGVcbiAgICAgKiBAbmFtZSBuZ1Nhbml0aXplXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiAjIG5nU2FuaXRpemVcbiAgICAgKlxuICAgICAqIFRoZSBgbmdTYW5pdGl6ZWAgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgdG8gc2FuaXRpemUgSFRNTC5cbiAgICAgKlxuICAgICAqXG4gICAgICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1Nhbml0aXplXCI+PC9kaXY+XG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIG5nU2FuaXRpemUuJHNhbml0aXplIGAkc2FuaXRpemVgfSBmb3IgdXNhZ2UuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRzYW5pdGl6ZVxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiAgIFNhbml0aXplcyBhbiBodG1sIHN0cmluZyBieSBzdHJpcHBpbmcgYWxsIHBvdGVudGlhbGx5IGRhbmdlcm91cyB0b2tlbnMuXG4gICAgICpcbiAgICAgKiAgIFRoZSBpbnB1dCBpcyBzYW5pdGl6ZWQgYnkgcGFyc2luZyB0aGUgSFRNTCBpbnRvIHRva2Vucy4gQWxsIHNhZmUgdG9rZW5zIChmcm9tIGEgd2hpdGVsaXN0KSBhcmVcbiAgICAgKiAgIHRoZW4gc2VyaWFsaXplZCBiYWNrIHRvIHByb3Blcmx5IGVzY2FwZWQgaHRtbCBzdHJpbmcuIFRoaXMgbWVhbnMgdGhhdCBubyB1bnNhZmUgaW5wdXQgY2FuIG1ha2VcbiAgICAgKiAgIGl0IGludG8gdGhlIHJldHVybmVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqICAgVGhlIHdoaXRlbGlzdCBmb3IgVVJMIHNhbml0aXphdGlvbiBvZiBhdHRyaWJ1dGUgdmFsdWVzIGlzIGNvbmZpZ3VyZWQgdXNpbmcgdGhlIGZ1bmN0aW9uc1xuICAgICAqICAgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YCBhbmQgYGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdGAgb2Yge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXJcbiAqICAgYCRjb21waWxlUHJvdmlkZXJgfS5cbiAgICAgKlxuICAgICAqICAgVGhlIGlucHV0IG1heSBhbHNvIGNvbnRhaW4gU1ZHIG1hcmt1cCBpZiB0aGlzIGlzIGVuYWJsZWQgdmlhIHtAbGluayAkc2FuaXRpemVQcm92aWRlcn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBIVE1MIGlucHV0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFNhbml0aXplZCBIVE1MLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbW9kdWxlPVwic2FuaXRpemVFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIiBuYW1lPVwic2FuaXRpemUtc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICBhbmd1bGFyLm1vZHVsZSgnc2FuaXRpemVFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXG4gICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzY2UnLCBmdW5jdGlvbigkc2NvcGUsICRzY2UpIHtcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldCA9XG4gICAgICAgICAgICAgICAnPHAgc3R5bGU9XCJjb2xvcjpibHVlXCI+YW4gaHRtbFxcbicgK1xuICAgICAgICAgICAgICAgJzxlbSBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9XFwnUFdOM0QhXFwnXCI+Y2xpY2sgaGVyZTwvZW0+XFxuJyArXG4gICAgICAgICAgICAgICAnc25pcHBldDwvcD4nO1xuICAgICAgICAgICAgICRzY29wZS5kZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKCRzY29wZS5zbmlwcGV0KTtcbiAgICAgICAgICAgICB9O1xuICAgICAgICAgICB9XSk7XG4gICAgIDwvc2NyaXB0PlxuICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICBTbmlwcGV0OiA8dGV4dGFyZWEgbmctbW9kZWw9XCJzbmlwcGV0XCIgY29scz1cIjYwXCIgcm93cz1cIjNcIj48L3RleHRhcmVhPlxuICAgICA8dGFibGU+XG4gICAgIDx0cj5cbiAgICAgPHRkPkRpcmVjdGl2ZTwvdGQ+XG4gICAgIDx0ZD5Ib3c8L3RkPlxuICAgICA8dGQ+U291cmNlPC90ZD5cbiAgICAgPHRkPlJlbmRlcmVkPC90ZD5cbiAgICAgPC90cj5cbiAgICAgPHRyIGlkPVwiYmluZC1odG1sLXdpdGgtc2FuaXRpemVcIj5cbiAgICAgPHRkPm5nLWJpbmQtaHRtbDwvdGQ+XG4gICAgIDx0ZD5BdXRvbWF0aWNhbGx5IHVzZXMgJHNhbml0aXplPC90ZD5cbiAgICAgPHRkPjxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0XCImZ3Q7PGJyLz4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxuICAgICA8dGQ+PGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgPC90cj5cbiAgICAgPHRyIGlkPVwiYmluZC1odG1sLXdpdGgtdHJ1c3RcIj5cbiAgICAgPHRkPm5nLWJpbmQtaHRtbDwvdGQ+XG4gICAgIDx0ZD5CeXBhc3MgJHNhbml0aXplIGJ5IGV4cGxpY2l0bHkgdHJ1c3RpbmcgdGhlIGRhbmdlcm91cyB2YWx1ZTwvdGQ+XG4gICAgIDx0ZD5cbiAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cImRlbGliZXJhdGVseVRydXN0RGFuZ2Vyb3VzU25pcHBldCgpXCImZ3Q7XG4gICAgICZsdDsvZGl2Jmd0OzwvcHJlPlxuICAgICA8L3RkPlxuICAgICA8dGQ+PGRpdiBuZy1iaW5kLWh0bWw9XCJkZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQoKVwiPjwvZGl2PjwvdGQ+XG4gICAgIDwvdHI+XG4gICAgIDx0ciBpZD1cImJpbmQtZGVmYXVsdFwiPlxuICAgICA8dGQ+bmctYmluZDwvdGQ+XG4gICAgIDx0ZD5BdXRvbWF0aWNhbGx5IGVzY2FwZXM8L3RkPlxuICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCImZ3Q7PGJyLz4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxuICAgICA8dGQ+PGRpdiBuZy1iaW5kPVwic25pcHBldFwiPjwvZGl2PjwvdGQ+XG4gICAgIDwvdHI+XG4gICAgIDwvdGFibGU+XG4gICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSB0aGUgaHRtbCBzbmlwcGV0IGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC1zYW5pdGl6ZSBkaXYnKSkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSkuXG4gICAgICAgICB0b0JlKCc8cD5hbiBodG1sXFxuPGVtPmNsaWNrIGhlcmU8L2VtPlxcbnNuaXBwZXQ8L3A+Jyk7XG4gICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgaW5saW5lIHJhdyBzbmlwcGV0IGlmIGJvdW5kIHRvIGEgdHJ1c3RlZCB2YWx1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXRydXN0IGRpdicpKS5nZXRBdHRyaWJ1dGUoJ2lubmVySFRNTCcpKS5cbiAgICAgICAgIHRvQmUoXCI8cCBzdHlsZT1cXFwiY29sb3I6Ymx1ZVxcXCI+YW4gaHRtbFxcblwiICtcbiAgICAgICAgICAgICAgXCI8ZW0gb25tb3VzZW92ZXI9XFxcInRoaXMudGV4dENvbnRlbnQ9J1BXTjNEISdcXFwiPmNsaWNrIGhlcmU8L2VtPlxcblwiICtcbiAgICAgICAgICAgICAgXCJzbmlwcGV0PC9wPlwiKTtcbiAgICAgfSk7XG5cbiAgICAgaXQoJ3Nob3VsZCBlc2NhcGUgc25pcHBldCB3aXRob3V0IGFueSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWRlZmF1bHQgZGl2JykpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpLlxuICAgICAgICAgdG9CZShcIiZsdDtwIHN0eWxlPVxcXCJjb2xvcjpibHVlXFxcIiZndDthbiBodG1sXFxuXCIgK1xuICAgICAgICAgICAgICBcIiZsdDtlbSBvbm1vdXNlb3Zlcj1cXFwidGhpcy50ZXh0Q29udGVudD0nUFdOM0QhJ1xcXCImZ3Q7Y2xpY2sgaGVyZSZsdDsvZW0mZ3Q7XFxuXCIgK1xuICAgICAgICAgICAgICBcInNuaXBwZXQmbHQ7L3AmZ3Q7XCIpO1xuICAgICB9KTtcblxuICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuY2xlYXIoKTtcbiAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLnNlbmRLZXlzKCduZXcgPGIgb25jbGljaz1cImFsZXJ0KDEpXCI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC1zYW5pdGl6ZSBkaXYnKSkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSkuXG4gICAgICAgICB0b0JlKCduZXcgPGI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC10cnVzdCBkaXYnKSkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSkudG9CZShcbiAgICAgICAgICduZXcgPGIgb25jbGljaz1cImFsZXJ0KDEpXCI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWRlZmF1bHQgZGl2JykpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpLnRvQmUoXG4gICAgICAgICBcIm5ldyAmbHQ7YiBvbmNsaWNrPVxcXCJhbGVydCgxKVxcXCImZ3Q7dGV4dCZsdDsvYiZndDtcIik7XG4gICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDwvZXhhbXBsZT5cbiAgICAgKi9cblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHByb3ZpZGVyXG4gICAgICogQG5hbWUgJHNhbml0aXplUHJvdmlkZXJcbiAgICAgKiBAdGhpc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ3JlYXRlcyBhbmQgY29uZmlndXJlcyB7QGxpbmsgJHNhbml0aXplfSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAkU2FuaXRpemVQcm92aWRlcigpIHtcbiAgICAgICAgdmFyIHN2Z0VuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLiRnZXQgPSBbJyQkc2FuaXRpemVVcmknLCBmdW5jdGlvbigkJHNhbml0aXplVXJpKSB7XG4gICAgICAgICAgICBpZiAoc3ZnRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGV4dGVuZCh2YWxpZEVsZW1lbnRzLCBzdmdFbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaHRtbCkge1xuICAgICAgICAgICAgICAgIHZhciBidWYgPSBbXTtcbiAgICAgICAgICAgICAgICBodG1sUGFyc2VyKGh0bWwsIGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIGZ1bmN0aW9uKHVyaSwgaXNJbWFnZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIS9edW5zYWZlOi8udGVzdCgkJHNhbml0aXplVXJpKHVyaSwgaXNJbWFnZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmLmpvaW4oJycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfV07XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkc2FuaXRpemVQcm92aWRlciNlbmFibGVTdmdcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIEVuYWJsZXMgYSBzdWJzZXQgb2Ygc3ZnIHRvIGJlIHN1cHBvcnRlZCBieSB0aGUgc2FuaXRpemVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgICAgICAgKiAgIDxwPkJ5IGVuYWJsaW5nIHRoaXMgc2V0dGluZyB3aXRob3V0IHRha2luZyBvdGhlciBwcmVjYXV0aW9ucywgeW91IG1pZ2h0IGV4cG9zZSB5b3VyXG4gICAgICAgICAqICAgYXBwbGljYXRpb24gdG8gY2xpY2staGlqYWNraW5nIGF0dGFja3MuIEluIHRoZXNlIGF0dGFja3MsIHNhbml0aXplZCBzdmcgZWxlbWVudHMgY291bGQgYmUgcG9zaXRpb25lZFxuICAgICAgICAgKiAgIG91dHNpZGUgb2YgdGhlIGNvbnRhaW5pbmcgZWxlbWVudCBhbmQgYmUgcmVuZGVyZWQgb3ZlciBvdGhlciBlbGVtZW50cyBvbiB0aGUgcGFnZSAoZS5nLiBhIGxvZ2luXG4gICAgICAgICAqICAgbGluaykuIFN1Y2ggYmVoYXZpb3IgY2FuIHRoZW4gcmVzdWx0IGluIHBoaXNoaW5nIGluY2lkZW50cy48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqICAgPHA+VG8gcHJvdGVjdCBhZ2FpbnN0IHRoZXNlLCBleHBsaWNpdGx5IHNldHVwIGBvdmVyZmxvdzogaGlkZGVuYCBjc3MgcnVsZSBmb3IgYWxsIHBvdGVudGlhbCBzdmdcbiAgICAgICAgICogICB0YWdzIHdpdGhpbiB0aGUgc2FuaXRpemVkIGNvbnRlbnQ6PC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiAgIDxicj5cbiAgICAgICAgICpcbiAgICAgICAgICogICA8cHJlPjxjb2RlPlxuICAgICAgICAgKiAgIC5yb290T2ZUaGVJbmNsdWRlZENvbnRlbnQgc3ZnIHtcbiAgICogICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDtcbiAgICogICB9XG4gICAgICAgICAqICAgPC9jb2RlPjwvcHJlPlxuICAgICAgICAgKiA8L2Rpdj5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gZmxhZyBFbmFibGUgb3IgZGlzYWJsZSBTVkcgc3VwcG9ydCBpbiB0aGUgc2FuaXRpemVyLlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxuZy4kc2FuaXRpemVQcm92aWRlcn0gUmV0dXJucyB0aGUgY3VycmVudGx5IGNvbmZpZ3VyZWQgdmFsdWUgaWYgY2FsbGVkXG4gICAgICAgICAqICAgIHdpdGhvdXQgYW4gYXJndW1lbnQgb3Igc2VsZiBmb3IgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbmFibGVTdmcgPSBmdW5jdGlvbihlbmFibGVTdmcpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQoZW5hYmxlU3ZnKSkge1xuICAgICAgICAgICAgICAgIHN2Z0VuYWJsZWQgPSBlbmFibGVTdmc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdmdFbmFibGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIC8vIFByaXZhdGUgc3R1ZmZcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBiaW5kID0gYW5ndWxhci5iaW5kO1xuICAgICAgICBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcbiAgICAgICAgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaDtcbiAgICAgICAgaXNEZWZpbmVkID0gYW5ndWxhci5pc0RlZmluZWQ7XG4gICAgICAgIGxvd2VyY2FzZSA9IGFuZ3VsYXIubG93ZXJjYXNlO1xuICAgICAgICBub29wID0gYW5ndWxhci5ub29wO1xuXG4gICAgICAgIGh0bWxQYXJzZXIgPSBodG1sUGFyc2VySW1wbDtcbiAgICAgICAgaHRtbFNhbml0aXplV3JpdGVyID0gaHRtbFNhbml0aXplV3JpdGVySW1wbDtcblxuICAgICAgICAvLyBSZWd1bGFyIEV4cHJlc3Npb25zIGZvciBwYXJzaW5nIHRhZ3MgYW5kIGF0dHJpYnV0ZXNcbiAgICAgICAgdmFyIFNVUlJPR0FURV9QQUlSX1JFR0VYUCA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csXG4gICAgICAgICAgICAvLyBNYXRjaCBldmVyeXRoaW5nIG91dHNpZGUgb2Ygbm9ybWFsIGNoYXJzIGFuZCBcIiAocXVvdGUgY2hhcmFjdGVyKVxuICAgICAgICAgICAgTk9OX0FMUEhBTlVNRVJJQ19SRUdFWFAgPSAvKFteIy1+IHwhXSkvZztcblxuXG4gICAgICAgIC8vIEdvb2Qgc291cmNlIG9mIGluZm8gYWJvdXQgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXNcbiAgICAgICAgLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy9PdmVydmlldy5odG1sI3NlbWFudGljc1xuICAgICAgICAvLyBodHRwOi8vc2ltb24uaHRtbDUub3JnL2h0bWwtZWxlbWVudHNcblxuICAgICAgICAvLyBTYWZlIFZvaWQgRWxlbWVudHMgLSBIVE1MNVxuICAgICAgICAvLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjdm9pZC1lbGVtZW50c1xuICAgICAgICB2YXIgdm9pZEVsZW1lbnRzID0gdG9NYXAoJ2FyZWEsYnIsY29sLGhyLGltZyx3YnInKTtcblxuICAgICAgICAvLyBFbGVtZW50cyB0aGF0IHlvdSBjYW4sIGludGVudGlvbmFsbHksIGxlYXZlIG9wZW4gKGFuZCB3aGljaCBjbG9zZSB0aGVtc2VsdmVzKVxuICAgICAgICAvLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjb3B0aW9uYWwtdGFnc1xuICAgICAgICB2YXIgb3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzID0gdG9NYXAoJ2NvbGdyb3VwLGRkLGR0LGxpLHAsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHInKSxcbiAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMgPSB0b01hcCgncnAscnQnKSxcbiAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnRWxlbWVudHMgPSBleHRlbmQoe30sXG4gICAgICAgICAgICAgICAgb3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyxcbiAgICAgICAgICAgICAgICBvcHRpb25hbEVuZFRhZ0Jsb2NrRWxlbWVudHMpO1xuXG4gICAgICAgIC8vIFNhZmUgQmxvY2sgRWxlbWVudHMgLSBIVE1MNVxuICAgICAgICB2YXIgYmxvY2tFbGVtZW50cyA9IGV4dGVuZCh7fSwgb3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzLCB0b01hcCgnYWRkcmVzcyxhcnRpY2xlLCcgK1xuICAgICAgICAgICAgJ2FzaWRlLGJsb2NrcXVvdGUsY2FwdGlvbixjZW50ZXIsZGVsLGRpcixkaXYsZGwsZmlndXJlLGZpZ2NhcHRpb24sZm9vdGVyLGgxLGgyLGgzLGg0LGg1LCcgK1xuICAgICAgICAgICAgJ2g2LGhlYWRlcixoZ3JvdXAsaHIsaW5zLG1hcCxtZW51LG5hdixvbCxwcmUsc2VjdGlvbix0YWJsZSx1bCcpKTtcblxuICAgICAgICAvLyBJbmxpbmUgRWxlbWVudHMgLSBIVE1MNVxuICAgICAgICB2YXIgaW5saW5lRWxlbWVudHMgPSBleHRlbmQoe30sIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMsIHRvTWFwKCdhLGFiYnIsYWNyb255bSxiLCcgK1xuICAgICAgICAgICAgJ2JkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscywnICtcbiAgICAgICAgICAgICdzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRpbWUsdHQsdSx2YXInKSk7XG5cbiAgICAgICAgLy8gU1ZHIEVsZW1lbnRzXG4gICAgICAgIC8vIGh0dHBzOi8vd2lraS53aGF0d2cub3JnL3dpa2kvU2FuaXRpemF0aW9uX3J1bGVzI3N2Z19FbGVtZW50c1xuICAgICAgICAvLyBOb3RlOiB0aGUgZWxlbWVudHMgYW5pbWF0ZSxhbmltYXRlQ29sb3IsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLHNldCBhcmUgaW50ZW50aW9uYWxseSBvbWl0dGVkLlxuICAgICAgICAvLyBUaGV5IGNhbiBwb3RlbnRpYWxseSBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQuIFNlZSAjMTEyOTBcbiAgICAgICAgdmFyIHN2Z0VsZW1lbnRzID0gdG9NYXAoJ2NpcmNsZSxkZWZzLGRlc2MsZWxsaXBzZSxmb250LWZhY2UsZm9udC1mYWNlLW5hbWUsZm9udC1mYWNlLXNyYyxnLGdseXBoLCcgK1xuICAgICAgICAgICAgJ2hrZXJuLGltYWdlLGxpbmVhckdyYWRpZW50LGxpbmUsbWFya2VyLG1ldGFkYXRhLG1pc3NpbmctZ2x5cGgsbXBhdGgscGF0aCxwb2x5Z29uLHBvbHlsaW5lLCcgK1xuICAgICAgICAgICAgJ3JhZGlhbEdyYWRpZW50LHJlY3Qsc3RvcCxzdmcsc3dpdGNoLHRleHQsdGl0bGUsdHNwYW4nKTtcblxuICAgICAgICAvLyBCbG9ja2VkIEVsZW1lbnRzICh3aWxsIGJlIHN0cmlwcGVkKVxuICAgICAgICB2YXIgYmxvY2tlZEVsZW1lbnRzID0gdG9NYXAoJ3NjcmlwdCxzdHlsZScpO1xuXG4gICAgICAgIHZhciB2YWxpZEVsZW1lbnRzID0gZXh0ZW5kKHt9LFxuICAgICAgICAgICAgdm9pZEVsZW1lbnRzLFxuICAgICAgICAgICAgYmxvY2tFbGVtZW50cyxcbiAgICAgICAgICAgIGlubGluZUVsZW1lbnRzLFxuICAgICAgICAgICAgb3B0aW9uYWxFbmRUYWdFbGVtZW50cyk7XG5cbiAgICAgICAgLy9BdHRyaWJ1dGVzIHRoYXQgaGF2ZSBocmVmIGFuZCBoZW5jZSBuZWVkIHRvIGJlIHNhbml0aXplZFxuICAgICAgICB2YXIgdXJpQXR0cnMgPSB0b01hcCgnYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHhsaW5rOmhyZWYnKTtcblxuICAgICAgICB2YXIgaHRtbEF0dHJzID0gdG9NYXAoJ2FiYnIsYWxpZ24sYWx0LGF4aXMsYmdjb2xvcixib3JkZXIsY2VsbHBhZGRpbmcsY2VsbHNwYWNpbmcsY2xhc3MsY2xlYXIsJyArXG4gICAgICAgICAgICAnY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSwnICtcbiAgICAgICAgICAgICdpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsJyArXG4gICAgICAgICAgICAnc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc3BhbixzdGFydCxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0eXBlLCcgK1xuICAgICAgICAgICAgJ3ZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGgnKTtcblxuICAgICAgICAvLyBTVkcgYXR0cmlidXRlcyAod2l0aG91dCBcImlkXCIgYW5kIFwibmFtZVwiIGF0dHJpYnV0ZXMpXG4gICAgICAgIC8vIGh0dHBzOi8vd2lraS53aGF0d2cub3JnL3dpa2kvU2FuaXRpemF0aW9uX3J1bGVzI3N2Z19BdHRyaWJ1dGVzXG4gICAgICAgIHZhciBzdmdBdHRycyA9IHRvTWFwKCdhY2NlbnQtaGVpZ2h0LGFjY3VtdWxhdGUsYWRkaXRpdmUsYWxwaGFiZXRpYyxhcmFiaWMtZm9ybSxhc2NlbnQsJyArXG4gICAgICAgICAgICAnYmFzZVByb2ZpbGUsYmJveCxiZWdpbixieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGNvbG9yLGNvbG9yLXJlbmRlcmluZyxjb250ZW50LCcgK1xuICAgICAgICAgICAgJ2N4LGN5LGQsZHgsZHksZGVzY2VudCxkaXNwbGF5LGR1cixlbmQsZmlsbCxmaWxsLXJ1bGUsZm9udC1mYW1pbHksZm9udC1zaXplLGZvbnQtc3RyZXRjaCwnICtcbiAgICAgICAgICAgICdmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmcm9tLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsZ3JhZGllbnRVbml0cyxoYW5naW5nLCcgK1xuICAgICAgICAgICAgJ2hlaWdodCxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZGVvZ3JhcGhpYyxrLGtleVBvaW50cyxrZXlTcGxpbmVzLGtleVRpbWVzLGxhbmcsJyArXG4gICAgICAgICAgICAnbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsbWF0aGVtYXRpY2FsLCcgK1xuICAgICAgICAgICAgJ21heCxtaW4sb2Zmc2V0LG9wYWNpdHksb3JpZW50LG9yaWdpbixvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEsJyArXG4gICAgICAgICAgICAncGF0aCxwYXRoTGVuZ3RoLHBvaW50cyxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHIscmVmWCxyZWZZLHJlcGVhdENvdW50LHJlcGVhdER1ciwnICtcbiAgICAgICAgICAgICdyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxyZXN0YXJ0LHJvdGF0ZSxyeCxyeSxzbG9wZSxzdGVtaCxzdGVtdixzdG9wLWNvbG9yLCcgK1xuICAgICAgICAgICAgJ3N0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cm9rZSxzdHJva2UtZGFzaGFycmF5LCcgK1xuICAgICAgICAgICAgJ3N0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixzdHJva2UtbWl0ZXJsaW1pdCxzdHJva2Utb3BhY2l0eSwnICtcbiAgICAgICAgICAgICdzdHJva2Utd2lkdGgsc3lzdGVtTGFuZ3VhZ2UsdGFyZ2V0LHRleHQtYW5jaG9yLHRvLHRyYW5zZm9ybSx0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbiwnICtcbiAgICAgICAgICAgICd1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdmFsdWVzLHZlcnNpb24sdmlld0JveCx2aXNpYmlsaXR5LCcgK1xuICAgICAgICAgICAgJ3dpZHRoLHdpZHRocyx4LHgtaGVpZ2h0LHgxLHgyLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUsJyArXG4gICAgICAgICAgICAneGxpbms6dHlwZSx4bWw6YmFzZSx4bWw6bGFuZyx4bWw6c3BhY2UseG1sbnMseG1sbnM6eGxpbmsseSx5MSx5Mix6b29tQW5kUGFuJywgdHJ1ZSk7XG5cbiAgICAgICAgdmFyIHZhbGlkQXR0cnMgPSBleHRlbmQoe30sXG4gICAgICAgICAgICB1cmlBdHRycyxcbiAgICAgICAgICAgIHN2Z0F0dHJzLFxuICAgICAgICAgICAgaHRtbEF0dHJzKTtcblxuICAgICAgICBmdW5jdGlvbiB0b01hcChzdHIsIGxvd2VyY2FzZUtleXMpIHtcbiAgICAgICAgICAgIHZhciBvYmogPSB7fSwgaXRlbXMgPSBzdHIuc3BsaXQoJywnKSwgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG9ialtsb3dlcmNhc2VLZXlzID8gbG93ZXJjYXNlKGl0ZW1zW2ldKSA6IGl0ZW1zW2ldXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZXJ0Qm9keUVsZW1lbnQ7XG4gICAgICAgIChmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgICAgICAgIHZhciBkb2M7XG4gICAgICAgICAgICBpZiAod2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5pbXBsZW1lbnRhdGlvbikge1xuICAgICAgICAgICAgICAgIGRvYyA9IHdpbmRvdy5kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJ2luZXJ0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93ICRzYW5pdGl6ZU1pbkVycignbm9pbmVydCcsICdDYW5cXCd0IGNyZWF0ZSBhbiBpbmVydCBodG1sIGRvY3VtZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZG9jRWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQgfHwgZG9jLmdldERvY3VtZW50RWxlbWVudCgpO1xuICAgICAgICAgICAgdmFyIGJvZHlFbGVtZW50cyA9IGRvY0VsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcblxuICAgICAgICAgICAgLy8gdXN1YWxseSB0aGVyZSBzaG91bGQgYmUgb25seSBvbmUgYm9keSBlbGVtZW50IGluIHRoZSBkb2N1bWVudCwgYnV0IElFIGRvZXNuJ3QgaGF2ZSBhbnksIHNvIHdlIG5lZWQgdG8gY3JlYXRlIG9uZVxuICAgICAgICAgICAgaWYgKGJvZHlFbGVtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpbmVydEJvZHlFbGVtZW50ID0gYm9keUVsZW1lbnRzWzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgICAgICAgICAgaW5lcnRCb2R5RWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCdib2R5Jyk7XG4gICAgICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChpbmVydEJvZHlFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBkb2MuYXBwZW5kQ2hpbGQoaHRtbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKHdpbmRvdyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGh0bWxQYXJzZXIoaHRtbFN0cmluZywge1xuICAgKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMpIHt9LFxuICAgKiAgICAgZW5kOiBmdW5jdGlvbih0YWcpIHt9LFxuICAgKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICAgKiAgICAgY29tbWVudDogZnVuY3Rpb24odGV4dCkge31cbiAgICogfSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBodG1sIHN0cmluZ1xuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaHRtbFBhcnNlckltcGwoaHRtbCwgaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKGh0bWwgPT09IG51bGwgfHwgaHRtbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBodG1sID0gJycgKyBodG1sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5lcnRCb2R5RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgICAgICAvL21YU1MgcHJvdGVjdGlvblxuICAgICAgICAgICAgdmFyIG1YU1NBdHRlbXB0cyA9IDU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKG1YU1NBdHRlbXB0cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAkc2FuaXRpemVNaW5FcnIoJ3VpbnB1dCcsICdGYWlsZWQgdG8gc2FuaXRpemUgaHRtbCBiZWNhdXNlIHRoZSBpbnB1dCBpcyB1bnN0YWJsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtWFNTQXR0ZW1wdHMtLTtcblxuICAgICAgICAgICAgICAgIC8vIHN0cmlwIGN1c3RvbS1uYW1lc3BhY2VkIGF0dHJpYnV0ZXMgb24gSUU8PTExXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaXBDdXN0b21Oc0F0dHJzKGluZXJ0Qm9keUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBodG1sID0gaW5lcnRCb2R5RWxlbWVudC5pbm5lckhUTUw7IC8vdHJpZ2dlciBtWFNTXG4gICAgICAgICAgICAgICAgaW5lcnRCb2R5RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfSB3aGlsZSAoaHRtbCAhPT0gaW5lcnRCb2R5RWxlbWVudC5pbm5lckhUTUwpO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGluZXJ0Qm9keUVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gRUxFTUVOVF9OT0RFXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLnN0YXJ0KG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgYXR0clRvTWFwKG5vZGUuYXR0cmlidXRlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogLy8gVEVYVCBOT0RFXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNoYXJzKG5vZGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG5leHROb2RlO1xuICAgICAgICAgICAgICAgIGlmICghKG5leHROb2RlID0gbm9kZS5maXJzdENoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5lbmQobm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0Tm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gaW5lcnRCb2R5RWxlbWVudCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuZW5kKG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2hpbGUgKChub2RlID0gaW5lcnRCb2R5RWxlbWVudC5maXJzdENoaWxkKSkge1xuICAgICAgICAgICAgICAgIGluZXJ0Qm9keUVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhdHRyVG9NYXAoYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGF0dHJzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgICAgIG1hcFthdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXA7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFc2NhcGVzIGFsbCBwb3RlbnRpYWxseSBkYW5nZXJvdXMgY2hhcmFjdGVycywgc28gdGhhdCB0aGVcbiAgICAgICAgICogcmVzdWx0aW5nIHN0cmluZyBjYW4gYmUgc2FmZWx5IGluc2VydGVkIGludG8gYXR0cmlidXRlIG9yXG4gICAgICAgICAqIGVsZW1lbnQgdGV4dC5cbiAgICAgICAgICogQHBhcmFtIHZhbHVlXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGVzY2FwZWQgdGV4dFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZW5jb2RlRW50aXRpZXModmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyYvZywgJyZhbXA7JykuXG4gICAgICAgICAgICByZXBsYWNlKFNVUlJPR0FURV9QQUlSX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGkgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgICAgIHZhciBsb3cgPSB2YWx1ZS5jaGFyQ29kZUF0KDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnJiMnICsgKCgoaGkgLSAweEQ4MDApICogMHg0MDApICsgKGxvdyAtIDB4REMwMCkgKyAweDEwMDAwKSArICc7JztcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgcmVwbGFjZShOT05fQUxQSEFOVU1FUklDX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyYjJyArIHZhbHVlLmNoYXJDb2RlQXQoMCkgKyAnOyc7XG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHJlcGxhY2UoLzwvZywgJyZsdDsnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLz4vZywgJyZndDsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjcmVhdGUgYW4gSFRNTC9YTUwgd3JpdGVyIHdoaWNoIHdyaXRlcyB0byBidWZmZXJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYnVmIHVzZSBidWYuam9pbignJykgdG8gZ2V0IG91dCBzYW5pdGl6ZWQgaHRtbCBzdHJpbmdcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge1xuICAgKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMpIHt9LFxuICAgKiAgICAgZW5kOiBmdW5jdGlvbih0YWcpIHt9LFxuICAgKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICAgKiAgICAgY29tbWVudDogZnVuY3Rpb24odGV4dCkge31cbiAgICogfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaHRtbFNhbml0aXplV3JpdGVySW1wbChidWYsIHVyaVZhbGlkYXRvcikge1xuICAgICAgICAgICAgdmFyIGlnbm9yZUN1cnJlbnRFbGVtZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgb3V0ID0gYmluZChidWYsIGJ1Zi5wdXNoKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFnID0gbG93ZXJjYXNlKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaWdub3JlQ3VycmVudEVsZW1lbnQgJiYgYmxvY2tlZEVsZW1lbnRzW3RhZ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZUN1cnJlbnRFbGVtZW50ID0gdGFnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghaWdub3JlQ3VycmVudEVsZW1lbnQgJiYgdmFsaWRFbGVtZW50c1t0YWddID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQoJzwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCh0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChhdHRycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsa2V5ID0gbG93ZXJjYXNlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSW1hZ2UgPSAodGFnID09PSAnaW1nJyAmJiBsa2V5ID09PSAnc3JjJykgfHwgKGxrZXkgPT09ICdiYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkQXR0cnNbbGtleV0gPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVyaUF0dHJzW2xrZXldICE9PSB0cnVlIHx8IHVyaVZhbGlkYXRvcih2YWx1ZSwgaXNJbWFnZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCgnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0KCc9XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0KGVuY29kZUVudGl0aWVzKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCgnXCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCgnPicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge1xuICAgICAgICAgICAgICAgICAgICB0YWcgPSBsb3dlcmNhc2UodGFnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZ25vcmVDdXJyZW50RWxlbWVudCAmJiB2YWxpZEVsZW1lbnRzW3RhZ10gPT09IHRydWUgJiYgdm9pZEVsZW1lbnRzW3RhZ10gIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCgnPC8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCh0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0KCc+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09IGlnbm9yZUN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmVDdXJyZW50RWxlbWVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGFyczogZnVuY3Rpb24oY2hhcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZ25vcmVDdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0KGVuY29kZUVudGl0aWVzKGNoYXJzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBJRTktMTEgY29tZXMgYWNyb3NzIGFuIHVua25vd24gbmFtZXNwYWNlZCBhdHRyaWJ1dGUgZS5nLiAneGxpbms6Zm9vJyBpdCBhZGRzICd4bWxuczpuczEnIGF0dHJpYnV0ZSB0byBkZWNsYXJlXG4gICAgICAgICAqIG5zMSBuYW1lc3BhY2UgYW5kIHByZWZpeGVzIHRoZSBhdHRyaWJ1dGUgd2l0aCAnbnMxJyAoZS5nLiAnbnMxOnhsaW5rOmZvbycpLiBUaGlzIGlzIHVuZGVzaXJhYmxlIHNpbmNlIHdlIGRvbid0IHdhbnRcbiAgICAgICAgICogdG8gYWxsb3cgYW55IG9mIHRoZXNlIGN1c3RvbSBhdHRyaWJ1dGVzLiBUaGlzIG1ldGhvZCBzdHJpcHMgdGhlbSBhbGwuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBub2RlIFJvb3QgZWxlbWVudCB0byBwcm9jZXNzXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdHJpcEN1c3RvbU5zQXR0cnMobm9kZSkge1xuICAgICAgICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gd2luZG93Lk5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyTm9kZSA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gYXR0ck5vZGUubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJOYW1lID09PSAneG1sbnM6bnMxJyB8fCBhdHRyTmFtZS5sYXN0SW5kZXhPZignbnMxOicsIDApID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOb2RlKGF0dHJOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG5leHROb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpcEN1c3RvbU5zQXR0cnMobmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FuaXRpemVUZXh0KGNoYXJzKSB7XG4gICAgICAgIHZhciBidWYgPSBbXTtcbiAgICAgICAgdmFyIHdyaXRlciA9IGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIG5vb3ApO1xuICAgICAgICB3cml0ZXIuY2hhcnMoY2hhcnMpO1xuICAgICAgICByZXR1cm4gYnVmLmpvaW4oJycpO1xuICAgIH1cblxuXG4vLyBkZWZpbmUgbmdTYW5pdGl6ZSBtb2R1bGUgYW5kIHJlZ2lzdGVyICRzYW5pdGl6ZSBzZXJ2aWNlXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nU2FuaXRpemUnLCBbXSkucHJvdmlkZXIoJyRzYW5pdGl6ZScsICRTYW5pdGl6ZVByb3ZpZGVyKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBmaWx0ZXJcbiAgICAgKiBAbmFtZSBsaW5reVxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBGaW5kcyBsaW5rcyBpbiB0ZXh0IGlucHV0IGFuZCB0dXJucyB0aGVtIGludG8gaHRtbCBsaW5rcy4gU3VwcG9ydHMgYGh0dHAvaHR0cHMvZnRwL21haWx0b2AgYW5kXG4gICAgICogcGxhaW4gZW1haWwgYWRkcmVzcyBsaW5rcy5cbiAgICAgKlxuICAgICAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZSBgbmdTYW5pdGl6ZWB9IG1vZHVsZSB0byBiZSBpbnN0YWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBJbnB1dCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXQgV2luZG93IChgX2JsYW5rfF9zZWxmfF9wYXJlbnR8X3RvcGApIG9yIG5hbWVkIGZyYW1lIHRvIG9wZW4gbGlua3MgaW4uXG4gICAgICogQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb24odXJsKX0gW2F0dHJpYnV0ZXNdIEFkZCBjdXN0b20gYXR0cmlidXRlcyB0byB0aGUgbGluayBlbGVtZW50LlxuICAgICAqXG4gICAgICogICAgQ2FuIGJlIG9uZSBvZjpcbiAgICAgKlxuICAgICAqICAgIC0gYG9iamVjdGA6IEEgbWFwIG9mIGF0dHJpYnV0ZXNcbiAgICAgKiAgICAtIGBmdW5jdGlvbmA6IFRha2VzIHRoZSB1cmwgYXMgYSBwYXJhbWV0ZXIgYW5kIHJldHVybnMgYSBtYXAgb2YgYXR0cmlidXRlc1xuICAgICAqXG4gICAgICogICAgSWYgdGhlIG1hcCBvZiBhdHRyaWJ1dGVzIGNvbnRhaW5zIGEgdmFsdWUgZm9yIGB0YXJnZXRgLCBpdCBvdmVycmlkZXMgdGhlIHZhbHVlIG9mXG4gICAgICogICAgdGhlIHRhcmdldCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEh0bWwtbGlua2lmaWVkIGFuZCB7QGxpbmsgJHNhbml0aXplIHNhbml0aXplZH0gdGV4dC5cbiAgICAgKlxuICAgICAqIEB1c2FnZVxuICAgICA8c3BhbiBuZy1iaW5kLWh0bWw9XCJsaW5reV9leHByZXNzaW9uIHwgbGlua3lcIj48L3NwYW4+XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJsaW5reUV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiIG5hbWU9XCJsaW5reS1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgU25pcHBldDogPHRleHRhcmVhIG5nLW1vZGVsPVwic25pcHBldFwiIGNvbHM9XCI2MFwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgPHRhYmxlPlxuICAgICA8dHI+XG4gICAgIDx0aD5GaWx0ZXI8L3RoPlxuICAgICA8dGg+U291cmNlPC90aD5cbiAgICAgPHRoPlJlbmRlcmVkPC90aD5cbiAgICAgPC90cj5cbiAgICAgPHRyIGlkPVwibGlua3ktZmlsdGVyXCI+XG4gICAgIDx0ZD5saW5reSBmaWx0ZXI8L3RkPlxuICAgICA8dGQ+XG4gICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0IHwgbGlua3lcIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+XG4gICAgIDwvdGQ+XG4gICAgIDx0ZD5cbiAgICAgPGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0IHwgbGlua3lcIj48L2Rpdj5cbiAgICAgPC90ZD5cbiAgICAgPC90cj5cbiAgICAgPHRyIGlkPVwibGlua3ktdGFyZ2V0XCI+XG4gICAgIDx0ZD5saW5reSB0YXJnZXQ8L3RkPlxuICAgICA8dGQ+XG4gICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0V2l0aFNpbmdsZVVSTCB8IGxpbmt5OidfYmxhbmsnXCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPlxuICAgICA8L3RkPlxuICAgICA8dGQ+XG4gICAgIDxkaXYgbmctYmluZC1odG1sPVwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX2JsYW5rJ1wiPjwvZGl2PlxuICAgICA8L3RkPlxuICAgICA8L3RyPlxuICAgICA8dHIgaWQ9XCJsaW5reS1jdXN0b20tYXR0cmlidXRlc1wiPlxuICAgICA8dGQ+bGlua3kgY3VzdG9tIGF0dHJpYnV0ZXM8L3RkPlxuICAgICA8dGQ+XG4gICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0V2l0aFNpbmdsZVVSTCB8IGxpbmt5Oidfc2VsZic6e3JlbDogJ25vZm9sbG93J31cIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+XG4gICAgIDwvdGQ+XG4gICAgIDx0ZD5cbiAgICAgPGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0V2l0aFNpbmdsZVVSTCB8IGxpbmt5Oidfc2VsZic6e3JlbDogJ25vZm9sbG93J31cIj48L2Rpdj5cbiAgICAgPC90ZD5cbiAgICAgPC90cj5cbiAgICAgPHRyIGlkPVwiZXNjYXBlZC1odG1sXCI+XG4gICAgIDx0ZD5ubyBmaWx0ZXI8L3RkPlxuICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XG4gICAgIDx0ZD48ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgPC90cj5cbiAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgIGFuZ3VsYXIubW9kdWxlKCdsaW5reUV4YW1wbGUnLCBbJ25nU2FuaXRpemUnXSlcbiAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLnNuaXBwZXQgPVxuICAgICAgICAgICAgICdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6XFxuJyArXG4gICAgICAgICAgICAgJ2h0dHA6Ly9hbmd1bGFyanMub3JnLyxcXG4nICtcbiAgICAgICAgICAgICAnbWFpbHRvOnVzQHNvbWV3aGVyZS5vcmcsXFxuJyArXG4gICAgICAgICAgICAgJ2Fub3RoZXJAc29tZXdoZXJlLm9yZyxcXG4nICtcbiAgICAgICAgICAgICAnYW5kIG9uZSBtb3JlOiBmdHA6Ly8xMjcuMC4wLjEvLic7XG4gICAgICAgICAgICRzY29wZS5zbmlwcGV0V2l0aFNpbmdsZVVSTCA9ICdodHRwOi8vYW5ndWxhcmpzLm9yZy8nO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBsaW5raWZ5IHRoZSBzbmlwcGV0IHdpdGggdXJscycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWZpbHRlcicpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQgfCBsaW5reScpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgIHRvQmUoJ1ByZXR0eSB0ZXh0IHdpdGggc29tZSBsaW5rczogaHR0cDovL2FuZ3VsYXJqcy5vcmcvLCB1c0Bzb21ld2hlcmUub3JnLCAnICtcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNsaW5reS1maWx0ZXIgYScpKS5jb3VudCgpKS50b0VxdWFsKDQpO1xuICAgICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgbm90IGxpbmtpZnkgc25pcHBldCB3aXRob3V0IHRoZSBsaW5reSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdlc2NhcGVkLWh0bWwnKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0JykpLmdldFRleHQoKSkuXG4gICAgICAgICAgICAgdG9CZSgnUHJldHR5IHRleHQgd2l0aCBzb21lIGxpbmtzOiBodHRwOi8vYW5ndWxhcmpzLm9yZy8sIG1haWx0bzp1c0Bzb21ld2hlcmUub3JnLCAnICtcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNlc2NhcGVkLWh0bWwgYScpKS5jb3VudCgpKS50b0VxdWFsKDApO1xuICAgICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLmNsZWFyKCk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLnNlbmRLZXlzKCduZXcgaHR0cDovL2xpbmsuJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGlua3ktZmlsdGVyJykpLmVsZW1lbnQoYnkuYmluZGluZygnc25pcHBldCB8IGxpbmt5JykpLmdldFRleHQoKSkuXG4gICAgICAgICAgICAgdG9CZSgnbmV3IGh0dHA6Ly9saW5rLicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnI2xpbmt5LWZpbHRlciBhJykpLmNvdW50KCkpLnRvRXF1YWwoMSk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXNjYXBlZC1odG1sJykpLmVsZW1lbnQoYnkuYmluZGluZygnc25pcHBldCcpKS5nZXRUZXh0KCkpXG4gICAgICAgICAgICAgLnRvQmUoJ25ldyBodHRwOi8vbGluay4nKTtcbiAgICAgICB9KTtcblxuICAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCB0aGUgdGFyZ2V0IHByb3BlcnR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS10YXJnZXQnKSkuXG4gICAgICAgICAgICBlbGVtZW50KGJ5LmJpbmRpbmcoXCJzbmlwcGV0V2l0aFNpbmdsZVVSTCB8IGxpbmt5OidfYmxhbmsnXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9CZSgnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2xpbmt5LXRhcmdldCBhJykpLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykpLnRvRXF1YWwoJ19ibGFuaycpO1xuICAgICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgb3B0aW9uYWxseSBhZGQgY3VzdG9tIGF0dHJpYnV0ZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWN1c3RvbS1hdHRyaWJ1dGVzJykpLlxuICAgICAgICAgICAgZWxlbWVudChieS5iaW5kaW5nKFwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX3NlbGYnOntyZWw6ICdub2ZvbGxvdyd9XCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9CZSgnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2xpbmt5LWN1c3RvbS1hdHRyaWJ1dGVzIGEnKSkuZ2V0QXR0cmlidXRlKCdyZWwnKSkudG9FcXVhbCgnbm9mb2xsb3cnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAgICovXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nU2FuaXRpemUnKS5maWx0ZXIoJ2xpbmt5JywgWyckc2FuaXRpemUnLCBmdW5jdGlvbigkc2FuaXRpemUpIHtcbiAgICAgICAgdmFyIExJTktZX1VSTF9SRUdFWFAgPVxuICAgICAgICAgICAgICAgIC8oKGZ0cHxodHRwcz8pOlxcL1xcL3wod3d3XFwuKXwobWFpbHRvOik/W0EtWmEtejAtOS5fJSstXStAKVxcUypbXlxccy47LCgpe308PlwiXFx1MjAxZFxcdTIwMTldL2ksXG4gICAgICAgICAgICBNQUlMVE9fUkVHRVhQID0gL15tYWlsdG86L2k7XG5cbiAgICAgICAgdmFyIGxpbmt5TWluRXJyID0gYW5ndWxhci4kJG1pbkVycignbGlua3knKTtcbiAgICAgICAgdmFyIGlzRGVmaW5lZCA9IGFuZ3VsYXIuaXNEZWZpbmVkO1xuICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IGFuZ3VsYXIuaXNGdW5jdGlvbjtcbiAgICAgICAgdmFyIGlzT2JqZWN0ID0gYW5ndWxhci5pc09iamVjdDtcbiAgICAgICAgdmFyIGlzU3RyaW5nID0gYW5ndWxhci5pc1N0cmluZztcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpZiAodGV4dCA9PSBudWxsIHx8IHRleHQgPT09ICcnKSByZXR1cm4gdGV4dDtcbiAgICAgICAgICAgIGlmICghaXNTdHJpbmcodGV4dCkpIHRocm93IGxpbmt5TWluRXJyKCdub3RzdHJpbmcnLCAnRXhwZWN0ZWQgc3RyaW5nIGJ1dCByZWNlaXZlZDogezB9JywgdGV4dCk7XG5cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzRm4gPVxuICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24oYXR0cmlidXRlcykgPyBhdHRyaWJ1dGVzIDpcbiAgICAgICAgICAgICAgICAgICAgaXNPYmplY3QoYXR0cmlidXRlcykgPyBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzT2JqZWN0KCkge3JldHVybiBhdHRyaWJ1dGVzO30gOlxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RW1wdHlBdHRyaWJ1dGVzT2JqZWN0KCkge3JldHVybiB7fTt9O1xuXG4gICAgICAgICAgICB2YXIgbWF0Y2g7XG4gICAgICAgICAgICB2YXIgcmF3ID0gdGV4dDtcbiAgICAgICAgICAgIHZhciBodG1sID0gW107XG4gICAgICAgICAgICB2YXIgdXJsO1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gcmF3Lm1hdGNoKExJTktZX1VSTF9SRUdFWFApKSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBub3QgZW5kIGluIHRoZXNlIGFzIHRoZXkgYXJlIHNvbWV0aW1lcyBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBzZW50ZW5jZVxuICAgICAgICAgICAgICAgIHVybCA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRpZCBub3QgbWF0Y2ggZnRwL2h0dHAvd3d3L21haWx0byB0aGVuIGFzc3VtZSBtYWlsdG9cbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoWzJdICYmICFtYXRjaFs0XSkge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSAobWF0Y2hbM10gPyAnaHR0cDovLycgOiAnbWFpbHRvOicpICsgdXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpID0gbWF0Y2guaW5kZXg7XG4gICAgICAgICAgICAgICAgYWRkVGV4dChyYXcuc3Vic3RyKDAsIGkpKTtcbiAgICAgICAgICAgICAgICBhZGRMaW5rKHVybCwgbWF0Y2hbMF0ucmVwbGFjZShNQUlMVE9fUkVHRVhQLCAnJykpO1xuICAgICAgICAgICAgICAgIHJhdyA9IHJhdy5zdWJzdHJpbmcoaSArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRUZXh0KHJhdyk7XG4gICAgICAgICAgICByZXR1cm4gJHNhbml0aXplKGh0bWwuam9pbignJykpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRUZXh0KHRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBodG1sLnB1c2goc2FuaXRpemVUZXh0KHRleHQpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkTGluayh1cmwsIHRleHQpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5LCBsaW5rQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNGbih1cmwpO1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGEgJyk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBsaW5rQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goa2V5ICsgJz1cIicgKyBsaW5rQXR0cmlidXRlc1trZXldICsgJ1wiICcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQodGFyZ2V0KSAmJiAhKCd0YXJnZXQnIGluIGxpbmtBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJ3RhcmdldD1cIicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXCIgJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnaHJlZj1cIicsXG4gICAgICAgICAgICAgICAgICAgIHVybC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JyksXG4gICAgICAgICAgICAgICAgICAgICdcIj4nKTtcbiAgICAgICAgICAgICAgICBhZGRUZXh0KHRleHQpO1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC9hPicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcblxuXG59KSh3aW5kb3csIHdpbmRvdy5hbmd1bGFyKTsiXX0=
