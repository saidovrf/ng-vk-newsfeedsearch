!function(){"use strict";angular.module("ngVkNewsfeedSearch",["ngRoute","ngAnimate","ngSanitize","angular-carousel"]).config(["$locationProvider","$routeProvider","$httpProvider",function(t,e,n){t.hashPrefix("!"),e.otherwise({redirectTo:"/"})}]).factory("Database",["$rootScope",function(t){return{query:"",nextFrom:"",groups:[],profiles:[],posts:[]}}]).factory("Alerts",function(){return{show:function(t){$("#alert-text").html(t),$("#alert").modal("toggle")}}}).factory("HTTP",["$rootScope",function(t){return{jsonp:function(e,n,o,r){n&&$.ajax({url:"https://ft.dev.hismith.ru/stat/create/",type:"POST",crossDomain:!0,success:function(t){},error:function(t){}}),$.ajax({url:e,type:"GET",dataType:"jsonp",crossDomain:!0,success:function(e){console.log("Url:",this.url),console.log("Response:",e),console.log("--------------------------"),t.$apply(function(){return 0===e.response.count?void r():void o(e)})}})}}}]).directive("ngEnterClick",function(){return function(t,e,n){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(n.ngEnterClick)}),e.preventDefault())})}}).filter("getInfo",function(){return function(t,e,n,o){var r="user",a=t.from_id,c="";switch("-"==t.from_id.toString().charAt(0)&&(r="group",a=t.from_id.toString().substr(1)),r){case"user":"photo"===e&&(c=o[a].photo_50),"name"===e&&(c=o[a].first_name+" "+o[a].last_name);break;case"group":"photo"===e&&(c=n[a].photo_50),"name"===e&&(c=n[a].name)}return c}}).filter("replaceIDs",function(){return function(t){for(var e,n=/\[(group|club|id)(\d*)\|([a-zA-Z0-9А-Яа-я\s]+)\]/gi,o=t;null!==(e=n.exec(o));){e.index===n.lastIndex&&n.lastIndex++;var r,a,c,i;e.forEach(function(t,e,n){switch(e){case 0:r=t;break;case 1:a=t;break;case 2:c=t;break;case 3:i=t}}),o=o.replace(r,'<a href="https://www.vk.com/'+a+c+'" target="_blank">'+i+"</a>")}return o}}).filter("filterPostType",function(){return function(t,e){var n=[],o="photo";return e&&(o=e),t.forEach(function(t,e,r){t.type==o&&n.push(t)}),n}}).run(["$rootScope","$location","Database",function(t,e,n){t.$on("$routeChangeStart",function(t,o,r){0===n.posts.length&&e.path("/")})}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkcm91dGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJoYXNoUHJlZml4Iiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcm9vdFNjb3BlIiwicXVlcnkiLCJuZXh0RnJvbSIsImdyb3VwcyIsInByb2ZpbGVzIiwicG9zdHMiLCJzaG93IiwidGV4dCIsIiQiLCJodG1sIiwibW9kYWwiLCJqc29ucCIsInVybCIsImlzRm9yTG9nIiwic3VjY2Vzc0NhbGxiYWNrIiwiZXJyb3JDYWxsYmFjayIsImFqYXgiLCJ0eXBlIiwiY3Jvc3NEb21haW4iLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJlcnJvciIsImRhdGFUeXBlIiwiY29uc29sZSIsImxvZyIsInRoaXMiLCIkYXBwbHkiLCJjb3VudCIsImRpcmVjdGl2ZSIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiYmluZCIsImV2ZW50Iiwid2hpY2giLCIkZXZhbCIsIm5nRW50ZXJDbGljayIsInByZXZlbnREZWZhdWx0IiwiZmlsdGVyIiwiaW5wdXQiLCJvYmplY3QiLCJpZCIsImZyb21faWQiLCJ0b1N0cmluZyIsImNoYXJBdCIsInN1YnN0ciIsInBob3RvXzUwIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsIm5hbWUiLCJtIiwicmVnZXgiLCJzdHIiLCJleGVjIiwiaW5kZXgiLCJsYXN0SW5kZXgiLCJmb3JSZXBsYWNlIiwid29yZCIsInRpdGxlIiwiZm9yRWFjaCIsIml0ZW0iLCJpIiwiYXJyIiwicmVwbGFjZSIsInJlc3VsdCIsImN1cnJlbnRUeXBlIiwicHVzaCIsInJ1biIsIiRsb2NhdGlvbiIsIkRhdGFiYXNlIiwiJG9uIiwibmV4dCIsImN1cnJlbnQiLCJsZW5ndGgiLCJwYXRoIl0sIm1hcHBpbmdzIjoiQ0FHQyxXQUNHLFlBRUFBLFNBQVFDLE9BQU8sc0JBQXVC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Q0ksS0FJZEcsS0FBTSxhQUFjLFlBQWEsV0FBWSxTQUFTbkUsRUFBWW9FLEVBQVdDLEdBRzFFckUsRUFBV3NFLElBQUssb0JBQXFCLFNBQVNyQyxFQUFPc0MsRUFBTUMsR0FDeEIsSUFBMUJILEVBQVNoRSxNQUFNb0UsUUFDaEJMLEVBQVVNLEtBQU0iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHJ1c3RhbXNhaWRvdiBvbiAwMi4wMy4xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdWa05ld3NmZWVkU2VhcmNoJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICduZ1Nhbml0aXplJywgJ2FuZ3VsYXItY2Fyb3VzZWwnXSlcblxuICAgIC5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsICckcm91dGVQcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIsICRyb3V0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgICAgICAkcm91dGVQcm92aWRlci5vdGhlcndpc2Uoe3JlZGlyZWN0VG86ICcvJ30pO1xuXG4gICAgICAgIC8vICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgICAgIC8vIGRlbGV0ZSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ107XG4gICAgfV0pXG5cbiAgICAuZmFjdG9yeSgnRGF0YWJhc2UnLCBbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHF1ZXJ5OiAnJyxcbiAgICAgICAgICAgIG5leHRGcm9tOiAnJyxcbiAgICAgICAgICAgIGdyb3VwczogW10sXG4gICAgICAgICAgICBwcm9maWxlczogW10sXG4gICAgICAgICAgICBwb3N0czogW11cbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuZmFjdG9yeSgnQWxlcnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2FsZXJ0LXRleHRcIikuaHRtbCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAkKCcjYWxlcnQnKS5tb2RhbCgndG9nZ2xlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSlcblxuICAgIC5mYWN0b3J5KCdIVFRQJywgWyckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHJvb3RTY29wZSl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBqc29ucDogZnVuY3Rpb24odXJsLCBpc0ZvckxvZywgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRm9yTG9nKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2Z0LmRldi5oaXNtaXRoLnJ1L3N0YXQvY3JlYXRlLycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc0RvbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VybDonLCB0aGlzLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3BvbnNlLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5kaXJlY3RpdmUoJ25nRW50ZXJDbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYmluZChcImtleWRvd24ga2V5cHJlc3NcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYoZXZlbnQud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nRW50ZXJDbGljayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pXG4gICAgLmZpbHRlcignZ2V0SW5mbycsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIG9iamVjdCwgZ3JvdXBzLCBwcm9maWxlcykge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSAndXNlcicsIGlkID0gaW5wdXQuZnJvbV9pZCwgcmVzcG9uc2UgPSAnJztcbiAgICAgICAgICAgIGlmIChpbnB1dC5mcm9tX2lkLnRvU3RyaW5nKCkuY2hhckF0KDApID09ICctJykge1xuICAgICAgICAgICAgICAgIHR5cGUgPSAnZ3JvdXAnO1xuICAgICAgICAgICAgICAgIGlkID0gaW5wdXQuZnJvbV9pZC50b1N0cmluZygpLnN1YnN0cigxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHR5cGUsIGlkLCBncm91cHMsIHByb2ZpbGVzKTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VzZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0ID09PSAncGhvdG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHByb2ZpbGVzW2lkXS5waG90b181MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0ID09PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcHJvZmlsZXNbaWRdLmZpcnN0X25hbWUgKyAnICcgKyBwcm9maWxlc1tpZF0ubGFzdF9uYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyb3VwJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdCA9PT0gJ3Bob3RvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBncm91cHNbaWRdLnBob3RvXzUwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QgPT09ICduYW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBncm91cHNbaWRdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5maWx0ZXIoJ3JlcGxhY2VJRHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgcmVnZXggPSAvXFxbKGdyb3VwfGNsdWJ8aWQpKFxcZCopXFx8KFthLXpBLVowLTnQkC3Qr9CwLdGPXFxzXSspXFxdL2dpO1xuICAgICAgICAgICAgdmFyIHN0ciA9IGlucHV0O1xuICAgICAgICAgICAgdmFyIG07XG5cbiAgICAgICAgICAgIHdoaWxlICgobSA9IHJlZ2V4LmV4ZWMoc3RyKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlc1xuICAgICAgICAgICAgICAgIGlmIChtLmluZGV4ID09PSByZWdleC5sYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnZXgubGFzdEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmb3JSZXBsYWNlLCB3b3JkLCBpZCwgdGl0bGU7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHJlc3VsdCBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCB0aGUgYG1gLXZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIG0uZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yUmVwbGFjZSA9IGl0ZW07IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQgPSBpdGVtOyBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGl0ZW07IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gaXRlbTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShmb3JSZXBsYWNlLCAnPGEgaHJlZj1cImh0dHBzOi8vd3d3LnZrLmNvbS8nICsgd29yZCArIGlkICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPicgKyB0aXRsZSArICc8L2E+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vIC5maWx0ZXIoJ25ld0xpbmVzJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgIC8vICAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoLzxiclxccypcXC8/Pi9naSwnXFxyXFxuJyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9KVxuXG4gICAgLmZpbHRlcignZmlsdGVyUG9zdFR5cGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LHR5cGUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXSwgY3VycmVudFR5cGUgPSAncGhvdG8nOyBcblxuICAgICAgICAgICAgaWYgKHR5cGUpIGN1cnJlbnRUeXBlID0gdHlwZTsgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycikge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT0gY3VycmVudFR5cGUpIHJlc3VsdC5wdXNoKGl0ZW0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIC5ydW4oIFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnRGF0YWJhc2UnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sIERhdGFiYXNlKSB7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgbGlzdGVuZXIgdG8gd2F0Y2ggcm91dGUgY2hhbmdlc1xuICAgICAgICAkcm9vdFNjb3BlLiRvbiggXCIkcm91dGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKCBEYXRhYmFzZS5wb3N0cy5sZW5ndGggPT09IDAgKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoIFwiL1wiICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9XSlcblxufSgpKTsiXX0=
